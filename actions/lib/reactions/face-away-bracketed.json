{
  "about": {
    "author": "@Kaiconure",
    "notes": [
      "Place this at the very top of your battle section, or at least above any gambit that will turn or move toward the mob.",
      "This will cause you to turn and face away from the mob when certain abilities are used, and then turn back when other",
      "abilities are later used."
    ]
  },
  "vars": {
    "face_away_bracketed": {
      "initiators": ["Primordial Surge"],
      "terminators": ["Waning Vigor", "Expunge"],
      "mobs": [],
      "triggered": false
    }
  },
  "actions": [
    {
      "commands": ["setVar('vars.face_away_bracketed.triggered', false)"],
      "delay": 0,
      "frequency": "infinity",
      "scope": "battle",
      "comment": "This will run exactly once at the start of any battle, and ensure that the face_away_bracketed.triggered flag is cleared."
    },
    {
      "when": [
        "vars.face_away_bracketed.triggered",
        "enemyUsedAbility(vars.face_away_bracketed.terminators)"
      ],
      "commands": [
        "setVar('vars.face_away_bracketed.triggered', false)",
        "log('====== END BRACKETED FACE-AWAY SEQUENCE ====== ')"
      ]
    },
    {
      "when": [
        "not vars.face_away_bracketed.triggered",
        "enemyUsedAbility(vars.face_away_bracketed.initiators)",
        "arrayLength(vars.face_away_bracketed.mobs) == 0 or any(bt.name, vars.face_away_bracketed.mobs)"
      ],
      "commands": [
        "faceAway(bt)",
        "setVar('vars.face_away_bracketed.triggered', true)",
        "log('====== BEGIN BRACKETED FACE-AWAY SEQUENCE ====== ')"
      ],
      "delay": 0
    },
    {
      "when": "vars.face_away_bracketed.triggered",
      "commands": [
        "log('Continuing bracketed face away...')",
        "faceAway(bt)",
        "wait(1)"
      ],
      "delay": 0
    }
  ]
}
