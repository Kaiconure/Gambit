{
  "about": {
    "author": "@Kaiconure",
    "notes": "Cycle the best available refresh over all configured targets by name."
  },
  "vars": {
    "refresh_cycle": {
      "spells": ["Refresh III", "Refresh II", "Refresh"],
      "targets": ["me"],
      "trust_mpp": 60
    }
  },
  "actions": [
    {
      "when": [
        "canUseSpell(vars.refresh_cycle.spells)",
        "partyByName(vars.refresh_cycle.targets) and not hasBuff(member, 'Refresh')",
        "member.is_player or (member.is_trust and member.mpp < vars.refresh_cycle.trust_mpp)"
      ],
      "commands": [
        "useSpell()",
        "postpone(spellRecast(spell.name) + 5)"
      ],
      "frequency": 1
    }
  ]
}
